<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Iron Fist Tournament</title>

<style>
body {
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
  color: #fdd835;
  text-align: center;
  margin: 0;
  padding: 0;
}
h1 {
  color: red;
  text-shadow: 0 0 15px #ff0000;
  font-size: 40px;
  margin-top: 20px;
}
button {
  cursor: pointer;
  padding: 5px 12px;
  border: none;
  border-radius: 6px;
  margin: 3px;
  font-weight: 600;
}
.win-btn { background: red; color: #fff; }
.lose-btn { background: #555; color: #fff; }
.save-btn { background: #4CAF50; color: white; }
.reset-btn { background: #ff3d00; color: white; }
.share-btn { background: #2962ff; color: white; }
.completed-match {
  background: rgba(0,255,0,0.15);
  border: 1px solid #00ff37;
  box-shadow: 0 0 10px #00ff3744;
  border-radius: 6px;
  padding: 5px;
}
.tick { color: #00ff37; font-size: 20px; font-weight: bold; margin-left: 6px; }
table {
  margin: 25px auto;
  border-collapse: collapse;
  width: 80%;
  max-width: 1000px;
  background: rgba(0,0,0,0.7);
  box-shadow: 0 0 20px #fdd83544;
}
th, td { border: 1px solid #fdd83566; padding: 8px; }
th { background: #222; color: #fdd835; }
tr:nth-child(even) { background: rgba(255,255,255,0.05); }
.round-title {
  font-size: 22px;
  margin-top: 40px;
  color: #fdd835;
  text-shadow: 0 0 10px #fdd835;
}
</style>
</head>
<body>

<h1>Iron Fist Tournament</h1>
<button onclick="resetAll()" class="reset-btn">üîÑ Reset All</button>

<h2 class="round-title">League Stage</h2>
<div id="matches"></div>

<h2 class="round-title">Leaderboard</h2>
<table id="leaderboard">
<thead><tr><th>Rank</th><th>Player</th><th>Points</th></tr></thead>
<tbody></tbody>
</table>

<h2 class="round-title">Knockout Rounds</h2>
<div id="knockout"></div>

<script>
const players = ["Naruto","Kakashi","Sai","Sakura","Neji","Rocklee","Tenten","Might Guy","Shikamaru","Ino","Choji","Asuma","Kiba","Shino","Hinata","Kurenai","Sasuke","Suigetsu","Karin","Jugo","Deidara","Hiruiko","Sasori","Tobi","Itachi","Kisame","Hidan","Kakuzu","Konan","Pain","Gaara","Temari","Kankuro","Chiyo","Yamato","Shizune","Tsunade","Jiraiya","Kabuto","Orochimaru","Minato","Small Obito","Small Kakashi","Hashirama"];

let matches = [], scores = {};
let KO = { r32: [], r16: [], qf: [], sf: [], final: [], champion: null };

// ---- SAVE / LOAD FULL STATE ----
function saveAll(){
  localStorage.setItem('ironFistFull', JSON.stringify({ matches, scores, KO }));
}

function loadAll(){
  const data = JSON.parse(localStorage.getItem('ironFistFull'));
  if(!data) return false;
  matches = data.matches;
  scores = data.scores;
  KO = data.KO || KO;
  return true;
}


function generateMatches(){
  players.forEach(p=>scores[p]={points:0});
  for(let i=0;i<players.length;i++){
    for(let j=i+1;j<i+4 && j<players.length;j++){
      matches.push({p1:players[i],p2:players[j],winner:null});
    }
  }
}

function renderMatches(){
  const div=document.getElementById('matches'); div.innerHTML='';
  matches.forEach((m,i)=>{
    div.innerHTML+=`<p>${m.p1} vs ${m.p2}
    <button onclick="setWinner(${i},1)">${m.p1}</button>
    <button onclick="setWinner(${i},2)">${m.p2}</button></p>`;
  });
}

function setWinner(i,w){
  if(matches[i].winner) return;
  let win=w===1?matches[i].p1:matches[i].p2;
  matches[i].winner=win; scores[win].points+=3;
  saveAll();
  renderLeaderboard();
}

function renderLeaderboard(){
  let arr=Object.keys(scores).map(p=>({player:p,points:scores[p].points}));
  arr.sort((a,b)=>b.points-a.points);
  const tb=document.querySelector('#leaderboard tbody'); tb.innerHTML='';
  arr.forEach((p,i)=>tb.innerHTML+=`<tr><td>${i+1}</td><td>${p.player}</td><td>${p.points}</td></tr>`);
  renderR32(arr.slice(0,32));
}

function renderR32(list){
  const div=document.getElementById('knockout');
  KO={r32:[],r16:[],qf:[],sf:[],final:[],champion:null};
  let html='<h3>Round of 32</h3>';
  for(let i=0;i<16;i++){
    let a=list[i].player, b=list[31-i].player;
    KO.r32.push({p1:a,p2:b,winner:null});
    html+=`<p>${a} vs ${b}
    <button onclick="winKO('r32',${i},1)">Win</button>
    <button onclick="winKO('r32',${i},2)">Win</button></p>`;
  }
  div.innerHTML=html;
}

function winKO(r,i,w){
  let m=KO[r][i]; if(m.winner) return;
  m.winner=w===1?m.p1:m.p2;

  if(r==='r32'){ KO.r16.push(m.winner); if(KO.r16.length===16) renderNext('r16',8); }
  if(r==='r16'){ KO.qf.push(m.winner); if(KO.qf.length===8) renderNext('qf',4); }
  if(r==='qf'){ KO.sf.push(m.winner); if(KO.sf.length===4) renderNext('sf',2); }
  if(r==='sf'){ KO.final.push(m.winner); if(KO.final.length===2) renderFinal(); }
  if(r==='final'){ KO.champion=m.winner; document.getElementById('knockout').innerHTML+=`<h2>üèÜ Champion: ${KO.champion}</h2>`; }

  saveAll();
}
  if(r==='r16'){ KO.qf.push(m.winner); if(KO.qf.length===8) renderNext('qf',4); }
  if(r==='qf'){ KO.sf.push(m.winner); if(KO.sf.length===4) renderNext('sf',2); }
  if(r==='sf'){ KO.final.push(m.winner); if(KO.final.length===2) renderFinal(); }
  if(r==='final'){ KO.champion=m.winner; document.getElementById('knockout').innerHTML+=`<h2>üèÜ Champion: ${KO.champion}</h2>`; }
}

function renderNext(r,c){
  let prev=KO[r==='r16'?'r32':r==='qf'?'r16':'qf'];
  let html=`<h3>${r.toUpperCase()}</h3>`;
  KO[r]=[];
  for(let i=0;i<c;i++){
    let a=prev[i].winner,b=prev[prev.length-1-i].winner;
    KO[r].push({p1:a,p2:b,winner:null});
    html+=`<p>${a} vs ${b}
    <button onclick="winKO('${r}',${i},1)">Win</button>
    <button onclick="winKO('${r}',${i},2)">Win</button></p>`;
  }
  document.getElementById('knockout').innerHTML+=html;
}

function renderFinal(){
  let a=KO.sf[0].winner,b=KO.sf[1].winner;
  KO.final=[{p1:a,p2:b,winner:null}];
  document.getElementById('knockout').innerHTML+=`<h3>Final</h3><p>${a} vs ${b}
  <button onclick="winKO('final',0,1)">Win</button>
  <button onclick="winKO('final',0,2)">Win</button></p>`;
}

function resetAll(){
  if(!confirm('Reset all data?')) return;
  localStorage.removeItem('ironFistFull');
  matches=[]; scores={}; KO={ r32: [], r16: [], qf: [], sf: [], final: [], champion: null };
  if(!loadAll()){
  generateMatches();
}
renderMatches();
renderLeaderboard();
}; generateMatches(); renderMatches(); renderLeaderboard(); }

generateMatches(); renderMatches(); renderLeaderboard();
</script>
</body>
</html>
