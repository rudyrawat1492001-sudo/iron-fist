<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Iron Fist Tournament</title>

<style>
body {
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
  color: #fdd835;
  text-align: center;
  margin: 0;
  padding: 0;
}
h1 {
  color: red;
  text-shadow: 0 0 15px #ff0000;
  font-size: 40px;
  margin-top: 20px;
}
button {
  cursor: pointer;
  padding: 5px 12px;
  border: none;
  border-radius: 6px;
  margin: 3px;
  font-weight: 600;
}
.win-btn {
  background: red;
  color: #fff;
}
.lose-btn {
  background: #555;
  color: #fff;
}
.save-btn {
  background: #4CAF50;
  color: white;
}
.reset-btn {
  background: #ff3d00;
  color: white;
}
.share-btn {
  background: #2962ff;
  color: white;
}

.completed-match {
  background: rgba(0,255,0,0.15);
  border: 1px solid #00ff37;
  box-shadow: 0 0 10px #00ff3744;
  border-radius: 6px;
  padding: 5px;
}
.tick {
  color: #00ff37;
  font-size: 20px;
  font-weight: bold;
  margin-left: 6px;
}

table {
  margin: 25px auto;
  border-collapse: collapse;
  width: 80%;
  max-width: 1000px;
  background: rgba(0,0,0,0.7);
  box-shadow: 0 0 20px #fdd83544;
}
th, td {
  border: 1px solid #fdd83566;
  padding: 8px;
}
th {
  background: #222;
  color: #fdd835;
}
tr:nth-child(even) {
  background: rgba(255,255,255,0.05);
}
.round-title {
  font-size: 22px;
  margin-top: 40px;
  color: #fdd835;
  text-shadow: 0 0 10px #fdd835;
}
.trophy {
  font-size: 26px;
  color: gold;
  margin-left: 8px;
}
</style>
</head>
<body>

<h1>Iron Fist Tournament</h1>

<button onclick="saveData()" class="save-btn">üíæ Save Progress</button>
<button onclick="loadData()" class="save-btn">üìÇ Load Saved</button>
<button onclick="resetAll()" class="reset-btn">üîÑ Reset All</button>
<button onclick="getShareLink()" class="share-btn">üîó Share Progress</button>

<h2 class="round-title">League Stage (3 Matches Each)</h2>
<div id="matches"></div>

<h2 class="round-title">Leaderboard</h2>
<table id="leaderboard">
  <thead>
    <tr><th>Rank</th><th>Player</th><th>Wins</th><th>Losses</th><th>Points</th></tr>
  </thead>
  <tbody></tbody>
</table>

<h2 class="round-title">Knockout Rounds</h2>
<div id="knockout"></div>

<script>
/* PLAYERS */
const players = [
"Naruto","Kakashi","Sai","Sakura","Neji","Rocklee","Tenten","Might Guy","Shikamaru",
"Ino","Choji","Asuma","Kiba","Shino","Hinata","Kurenai","Sasuke","Suigetsu","Karin","Jugo",
"Deidara","Hiruiko","Sasori","Tobi","Itachi","Kisame","Hidan","Kakuzu","Konan","Pain","Gaara",
"Temari","Kankuro","Chiyo","Yamato","Shizune","Tsunade","Jiraiya","Kabuto","Orochimaru","Minato",
"Small Obito","Small Kakashi","Hashirama"
];

let matches = [];
let scores = {};

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

/* GENERATE MATCHES */
function generateMatches() {
  const usedPairs = new Set();
  for (let i = 0; i < players.length; i++) {
    const p = players[i];
    if (!scores[p]) scores[p] = { wins: 0, losses: 0, points: 0 };
    const opponents = shuffle(players.filter(x => x !== p));
    let count = 0;
    for (let o of opponents) {
      const key = [p, o].sort().join("-");
      if (!usedPairs.has(key)) {
        matches.push({ p1: p, p2: o, winner: null });
        usedPairs.add(key);
        count++;
        if (count === 3) break;
      }
    }
  }
}

/* RENDER MATCHES */
function renderMatches() {
  const div = document.getElementById("matches");
  div.innerHTML = "";
  matches.forEach((m, i) => {

    const isDone = m.winner ? "completed-match" : "";

    const tick = m.winner ? `<span class='tick'>‚úîÔ∏è</span>` : "";

    const disabled = m.winner ? "disabled" : "";

    const box = document.createElement("div");
    box.className = isDone;
    box.innerHTML = `
      <p>üî• ${m.p1} vs ${m.p2} ${tick}</p>

      <button class='win-btn' ${disabled} onclick='setWinner(${i}, 1)'>${m.p1} Win</button>
      <button class='lose-btn' ${disabled} onclick='setWinner(${i}, 2)'>${m.p2} Win</button>

      <hr style='width:60%;opacity:0.2;'>
    `;
    div.appendChild(box);
